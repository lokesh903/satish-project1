{% extends "base.html" %}

{% block container %}

<div class="posts">
    {% for post in posts %}
    <div class="post">
        <div class="image">
            <img src="{{post.content.url}}" alt="img">
        </div>
        <div class="username">
            <h3>{{post.author.username}}</h3>
        </div>
        <div class="title">
            <p>{{post.title}}</p>
        </div>
        <div class="comment">
            {% if user.is_authenticated %}
            <div class="comment-container">
                <button class="add-comment-btn" onclick="openCommentForm(this)">
                    <i class="fa-regular fa-comment"></i>
                </button>
                <div class="commentx hidden" id="commentx-{{ post.id }}">
                    <div class="commentform">
                        <form action="{% url 'addcomment' post_id=post.id %}" method="POST">
                            {% csrf_token %}
                            <input type="text" name="text" placeholder="Comment" required>
                        </form>
                    </div>
                </div>
            </div>
            {% endif %}
            <button><a href="{% url 'viewcomment' post.id %}">all comments</a></button>
        </div>
    </div>
    {% endfor %}
</div>
{% endblock container %}